- [Описание](#описание)
- [Инициализация](#инициализация)
  - [Методы](#методы)
  - [Получение ответов](#получение-ответов)

## Описание
Компонента использует библиотеку CURL, разработанную Daniel Stenberg. Лицензия https://curl.haxx.se/docs/copyright.html

## Инициализация

``` bsl 

	ОбщегоНазначенияКлиент.ПодключитьКомпонентуИзМакета(
		Новый ОписаниеОповещения("ФормированиеHTTPЗапроса_ПослеПодключенияКомпоненты", ЭтотОбъект, Контекст),
		"HTTPЗапросыNative",
		"ОбщийМакет.КомпонентаHTTPЗапросов",
		ПараметрыПодключения);


// Вызывается после подключения компоненты перед формированием HTTP-запроса.
//
Процедура ФормированиеHTTPЗапроса_ПослеПодключенияКомпоненты(Результат, Контекст) Экспорт
	
	Если Результат.Подключено Тогда
		
		ОбъектКомпоненты = Результат.ПодключаемыйМодуль["HTTPRequester"];
		
		НастройкаПроксиСервера = СтандартныеПодсистемыКлиент.ПараметрыРаботыКлиента().НастройкиПроксиСервера;
		
		Контекст.Вставить("ОбъектКомпоненты", ОбъектКомпоненты);
		
		Если НастройкаПроксиСервера <> Неопределено И НЕ ПустаяСтрока(НастройкаПроксиСервера.Сервер) Тогда
			ОбъектКомпоненты.НачатьВызовУстановитьПараметрыПрокси(
				Новый ОписаниеОповещения("ФормированиеHTTPЗапроса_ПослеУстановкиПараметровПрокси", ЭтотОбъект, Контекст),
				"HTTP",
				НастройкаПроксиСервера.Сервер,
				НастройкаПроксиСервера.Порт,
				НастройкаПроксиСервера.Пользователь,
				НастройкаПроксиСервера.Пароль);
		Иначе
			ФормированиеHTTPЗапроса_ПослеУстановкиПараметровПрокси(Истина, Неопределено, Контекст);
		КонецЕсли;
		
	Иначе
		Если НЕ ПустаяСтрока(Результат.ОписаниеОшибки) Тогда
			ТекстОшибки = НСтр("ru = 'Ошибка при подключении компоненты HTTP-запросов:';
								|en = 'Ошибка при подключении компоненты HTTP-запросов:'");
			ТекстОшибки = ТекстОшибки + Символы.ПС + Результат.ОписаниеОшибки;
		Иначе
			ТекстОшибки = НСтр("ru = 'Операция невозможна. Требуется установка компоненты HTTP-запросов.';
								|en = 'Операция невозможна. Требуется установка компоненты HTTP-запросов.'");
		КонецЕсли;
		ИнтеграцияЕГАИСВызовСервера.ЗаписатьОшибкуВЖурналРегистрации(ТекстОшибки);
		ВызватьИсключение ТекстОшибки;
	КонецЕсли;
	
КонецПроцедуры


```

### Методы

- ОбъектКомпоненты.НачатьВызовExtendedGET(ОповещениеПриЗавершении, АдресЗапроса, Заголовки, Контекст.НастройкаОбмена.Таймаут, "", "");
- ОбъектКомпоненты.НачатьВызовExtendedPOST(ОповещениеПриЗавершении, АдресЗапроса, Контекст.ДанныеЗапроса.ТелоЗапроса, Заголовки, Контекст.НастройкаОбмена.Таймаут, "", "");
- ОбъектКомпоненты.НачатьВызовExtendedDELETE(ОповещениеПриЗавершении, АдресЗапроса, Заголовки, Контекст.НастройкаОбмена.Таймаут, "");


### Получение ответов

``` bsl

	Если Контекст.ДанныеЗапроса.ТипЗапроса = "GET" Тогда
		ТекстОтвета = Параметры[3];
		ТекстОшибки = Параметры[4];
	ИначеЕсли Контекст.ДанныеЗапроса.ТипЗапроса = "POST" Тогда
		ТекстОтвета = Параметры[4];
		ТекстОшибки = Параметры[5];
	ИначеЕсли Контекст.ДанныеЗапроса.ТипЗапроса = "DELETE" Тогда
		ТекстОшибки = Параметры[3];
	КонецЕсли;

```

